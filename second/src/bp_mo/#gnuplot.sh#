#!/bin/sh



sum=0
for a in 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000
do

#--------’¼Â’¹Ô’·ë’²Ì’¤Î’º¸’¤«’¤é 3 ’ÈÖ’ÌÜ’¤È 7 ’ÈÖ’ÌÜ’¤Î’¿ô’ÃÍ’¤ò’Ãê’½Ð--------# 

num=œôòø./bp_mo $a grep iteration œôòô tr -s œôòý œôòý œôòý œôòý œôòô cut -f3 -f7 -d œôòý œôòýœôòøœôòô

#--------’Ãê’½Ð’¤·’¤¿’¿ô’»ú’¤ò seed_(’ÈÖ’¹æ).dat ’¤Ë’µ­’Ï¿---------#

    echo "$num" >> seed_$a.dat
done
#------------’½Ð’ÎÏ’²è’Áü’¤Î’·Á’¼°’¤ò’Àß’Äê.’¤³’¤³’¤Æœò¾ù’¤Ï eps ’¤Æœò¾ù’½Ð’ÎÏ’¤¹’¤ë-----------#

echo œôòùset terminal postscript eps colorœôòù > bp_mo.gnuplot

#------------’½Ð’ÎÏ’¥Õ’¥¡’¥¤’¥ë’Ì¾’¤ò’·è’Äê------------#

 echo œôòùset output "bp_mo.eps"œôòù >> bp_mo.gnuplot

#------------’¥¯œò¾ù’¥é’¥Õ’¤Î’¥¿’¥¤’¥È’¥ë’¤ò’Àß’Äê-----------#
echo œôòùset title "error for iterations"œôòù >> bp_mo.gnuplot

#------------x ’¼´’¤Î’¥é’¥Øœò¾ù’¥ë’¤ò’Àß’Äê-----------#
echo œôòùset xlabel "iteration"œôòù >> bp_mo.gnuplot

#------------y ’¼´’¤Î’¥é’¥Øœò¾ù’¥ë’¤ò’Àß’Äê----------# echo œôòùset ylabel "error"œôòù >> bp_mo.gnuplot

#------------y ’¼´’¤Ë 2 ’¥«’¥é’¥à’ÌÜ(’·î),x ’¼´’¤Ë 1 ’¥«’¥é’¥à’ÌÜ(’µ¤’²¹)’¤ò’¥Õœò¾ú’¥í’¥Ã’¥È----------# 

echo œôòùplot "seed_1000.dat" with lines ,"seed_2000.dat" with lines,
"seed_3000.dat" with lines,"seed_4000.dat" with lines,"seed_5000.dat" with lines, "seed_6000.dat" with lines,"seed_7000.dat" with lines,"seed_8000.dat" with lines, "seed_9000.dat" with lines,"seed_10000.dat" with linesœôòù>> bp_mo_exor.gnuplot

gnuplot < bp_mo_exor.gnuplot


#------end for gnuplot #---------------------------------------------------------------# #----------------------bp_mo_ave.eps ’¤ò’ºî’À®----------------------# #---------------------------------------------------------------#

j=1 while : do

ave=0

#--------’¤½’¤ì’¤½œò¾ù’¤ì’¤Î seed_(’ÈÖ’¹æ).dat ’¤Î’¥Æœò¾ù’¡¼’¥¿’¤Î’Ê¿’¶Ñ’¤ò’¼è’¤ë--------# 

for a in 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000
do

#----seed_(’ÈÖ’¹æ).dat ’¤Î’¥Õ’¥¡’¥¤’¥ë’¤«’¤é j ’¹Ô’ÌÜ’¤Î’º¸’¤«’¤é 2 ’ÈÖ’ÌÜ’¤Î’¿ô’ÃÍ’¤ò’Ãê’½Ð’¤¹’¤ë--#

num=œôòøcat seed_$a.dat tr-sœôòýœôòýœôòýœôòýœôòôcut-f2-dœôòýœôòýœôòôsed-nœôòýjœôòýpœôòù|

#----’Ãê’½Ð’¤·’¤¿’¿ô’ÃÍ’¤«œò¾ù’Â¸’ºß’¤¹’¤ë’¤«’¤Èœò¾ù’¤¦’¤«’È½’ÃÇ-----#

if [ "$num" != "" ] ; then


#’Â¸’ºß’¤¹’¤ë’¤Ê’¤é’¤Ïœò¾ù ave ’¤Ë’ÃÍ’¤ò’²Ã’»»’¤¹’¤ë (bc ’¤Ï’¾®’¿ô’É½’¼¨)œôòô-œôòô 

ave=œôòøecho "$ave + $num" bcœôòøœôòô

fi
done

#--------seed ’¤ò 100~1000 ’¤Î’¥Æœò¾ù’¡¼’¥¿’¤ò’Ê¿’¶Ñ’¤¹’¤ë-------# 

ave=œôòøecho "scale=5;$ave / 10" bcœôòøœôòô

#--------j ’¹Ô’ÌÜ’¤Î’Ê¿’¶Ñ’ÃÍ’¤ò seed_ave.dat ’¤Ë’µ­’Ï¿’¤¹’¤ë-----# 

echo "$ave"
echo "$j $ave" >> seed_ave.dat

#--------120 ’¹Ô’ÌÜ’¤Ê’¤é’¤Ïœò¾ù’½è’Íý’¤Ï’½ª’Î»’¤µ’¤ì’¤ë--------# 

j=œôòøexpr $j + 1œôòø
if [ $j -gt 120 ] ; then

break fi

done


#------------’½Ð’ÎÏ’²è’Áü’¤Î’·Á’¼°’¤ò’Àß’Äê.’¤³’¤³’¤Æœò¾ù’¤Ï eps ’¤Æœò¾ù’½Ð’ÎÏ’¤¹’¤ë-----------# 

echo œôòùset terminal postscript eps colorœôòù > bp_mo_ave.gnuplot

#------------’½Ð’ÎÏ’¥Õ’¥¡’¥¤’¥ë’Ì¾’¤ò’·è’Äê------------#
echo œôòùset output "bp_mo_ave.eps"œôòù >> bp_mo_ave.gnuplot

#------------’¥¯œò¾ù’¥é’¥Õ’¤Î’¥¿’¥¤’¥È’¥ë’¤ò’Àß’Äê-----------#
echo œôòùset title "error for iterations"œôòù >> bp_mo_ave.gnuplot

#------------x ’¼´’¤Î’¥é’¥Øœò¾ù’¥ë’¤ò’Àß’Äê-----------#
echo œôòùset xlabel "iteration"œôòù >> bp_mo_ave.gnuplot

#------------y ’¼´’¤Î’¥é’¥Øœò¾ù’¥ë’¤ò’Àß’Äê----------#
echo œôòùset ylabel "Average of error"œôòù >> bp_mo_ave.gnuplot

#------------y ’¼´’¤Ë 2 ’¥«’¥é’¥à’ÌÜ(’·î),x ’¼´’¤Ë 1 ’¥«’¥é’¥à’ÌÜ(’µ¤’²¹)’¤ò’¥Õœò¾ú’¥í’¥Ã’¥È----------# 

echo œôòùplot "seed_ave.dat" with linesœôòù>> bp_mo_ave.gnuplot

gnuplot < bp_mo_ave.gnuplot
#------end for gnuplot
#------------’ºÇ’¸å’¤Ë’¤¤’¤é’¤Ê’¤¯’¤Ê’¤Ã’¤¿’¥Æœò¾ù’¡¼’¥¿’¥Õ’¥¡’¥¤’¥ë’¤ò’ºï’½ü’¤¹’¤ë---------# 

rm *.dat